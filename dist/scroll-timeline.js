!function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function e(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function i(t){if(t instanceof CSSUnitValue||t instanceof CSSMathSum)return t;var e=t.trim().match(/^(-?[0-9]*\.?[0-9]*)(px|%)$/);return e?new CSSUnitValue(e[1],"%"==e[2]?"percent":e[2]):null}var r=new CSSKeywordValue("auto"),o=new WeakMap,a=[];function l(t){return t===document.scrollingElement?document:t}function s(t){var e=o.get(t).animations;if(0!==e.length)for(var n=t.currentTime,i=0;i<e.length;i++)null==n?"paused"===e[i].playState&&e[i].cancel():e[i].currentTime=n}function c(t,e,o,a,l){if(l)return l(e,o,a,0==t.value?"start":"end");"block"===o?o="vertical":"inline"===o&&(o="horizontal");var s="vertical"===o?e.scrollHeight-e.clientHeight:e.scrollWidth-e.clientWidth;return function t(e,i){if(e instanceof CSSUnitValue){if("percent"==e.unit)return e.value*i/100;if("px"==e.unit)return e.value;throw TypeError("Unhandled unit type "+e.unit)}if(e instanceof CSSMathSum){for(var r,o=0,a=function(t,e){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=function(t,e){if(t){if("string"==typeof t)return n(t,void 0);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(t,void 0):void 0}}(t))){i&&(t=i);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(i=t[Symbol.iterator]()).next.bind(i)}(e.values);!(r=a()).done;)o+=t(r.value,i);return o}throw TypeError("Unsupported value type: "+typeof e)}(i(a===r?t:a),s)}function u(t,e){var n=o.get(t).animations,i=n.indexOf(e);-1!==i&&n.splice(i,1)}var f=function(){function t(t){o.set(this,{scrollSource:null,orientation:"block",startScrollOffset:r,endScrollOffset:r,timeRange:r,animations:[]}),this.scrollSource=t&&t.scrollSource||document.scrollingElement,this.orientation=t&&t.orientation||"block",this.startScrollOffset=t&&t.startScrollOffset||r,this.endScrollOffset=t&&t.endScrollOffset||r,this.timeRange=t&&t.timeRange||r}return e(t,[{key:"scrollSource",set:function(t){var e=this;this.scrollSource&&l(this.scrollSource).removeEventListener("scroll",function(){return s(e)}),t instanceof Element||(t=document.scrollingElement),o.get(this).scrollSource=t,l(t).addEventListener("scroll",function(){return s(e)}),s(this)},get:function(){return o.get(this).scrollSource}},{key:"orientation",set:function(t){if(-1===["block","inline","horizontal","vertical"].indexOf(t))throw TypeError("Invalid orientation");o.get(this).orientation=t,s(this)},get:function(){return o.get(this).orientation}},{key:"startScrollOffset",set:function(t){"auto"==t&&(t=r);var e=o.get(this);e.startScrollOffsetFunction=null;for(var n=0;n<a.length;n++){var l=a[n].parse(t);if(void 0!==l){t=l,e.startScrollOffsetFunction=a[n].evaluate;break}}if(t!=r&&!o.get(this).startScrollOffsetFunction){var c=i(t);if(!c||c instanceof CSSUnitValue&&"number"==c.unit)throw TypeError("Invalid start offset.")}e.startScrollOffset=t,s(this)},get:function(){return o.get(this).startScrollOffset}},{key:"endScrollOffset",set:function(t){"auto"==t&&(t=r),o.get(this).endScrollOffsetFunction=null;for(var e=0;e<a.length;e++){var n=a[e].parse(t);if(void 0!==n){t=n,o.get(this).endScrollOffsetFunction=a[e].evaluate;break}}if(t!=r&&!o.get(this).startScrollOffsetFunction){var l=i(t);if(!l||l instanceof CSSUnitValue&&"number"==l.unit)throw TypeError("Invalid end offset.")}o.get(this).endScrollOffset=t,s(this)},get:function(){return o.get(this).endScrollOffset}},{key:"timeRange",set:function(t){o.get(this).timeRange=t,s(this)},get:function(){return o.get(this).timeRange}},{key:"phase",get:function(){if(!this.scrollSource)return"inactive";var t=c(new CSSUnitValue(0,"percent"),this.scrollSource,this.orientation,this.startScrollOffset,o.get(this).startScrollOffsetFunction),e=c(new CSSUnitValue(100,"percent"),this.scrollSource,this.orientation,this.endScrollOffset,o.get(this).endScrollOffsetFunction);if(e-t<=0)return"inactive";var n=this.scrollSource.scrollTop;return"inline"!==this.orientation&&"horizontal"!==this.orientation||(n=this.scrollSource.scrollLeft),n<t?"before":n>=e?"after":"active"}},{key:"currentTime",get:function(){if(!this.scrollSource)return null;var t=c(new CSSUnitValue(0,"percent"),this.scrollSource,this.orientation,this.startScrollOffset,o.get(this).startScrollOffsetFunction),e=c(new CSSUnitValue(100,"percent"),this.scrollSource,this.orientation,this.endScrollOffset,o.get(this).endScrollOffsetFunction),n=function(t){var e=t.timeRange;if(e===r){e=0;for(var n=o.get(t).animations,i=0;i<n.length;i++)e=Math.max(e,n[i].effect.getComputedTiming().activeDuration);Infinity===e&&(e=0)}return e}(this),i=this.scrollSource.scrollTop;return"inline"!==this.orientation&&"horizontal"!==this.orientation||(i=this.scrollSource.scrollLeft),i<t?0:i>=e?n:(i-t)/(e-t)*n}},{key:"__polyfill",get:function(){return!0}}]),t}(),h=window.Element.prototype.animate,g=window.Animation,m=new WeakMap,p=function(){function t(t,e){if(t instanceof g)m.set(this,{animation:t,timeline:e,playState:"idle"});else{var n=e&&e instanceof f;m.set(this,{animation:new g(t,n?void 0:e),timeline:n?e:void 0,playState:n?"idle":null})}}var n=t.prototype;return n.finish=function(){m.get(this).animation.finish();var t=m.get(this).timeline;t?"finished"!=m.get(this).playState&&(m.get(this).playState="finished",u(t,m.get(this).animation)):m.get(this).animation.play()},n.play=function(){var t,e,n=m.get(this).timeline;n?("paused"!=m.get(this).animation.playState&&(m.get(this).animation.play(),m.get(this).animation.pause()),"running"!=m.get(this).playState&&(t=n,e=m.get(this).animation,o.get(t).animations.push(e),s(t),m.get(this).playState="running")):m.get(this).animation.play()},n.pause=function(){var t=m.get(this).timeline;t?"paused"!=m.get(this).playState&&(m.get(this).playState="paused",u(t,m.get(this).animation)):m.get(this).animation.pause()},n.reverse=function(){m.get(this).animation.reverse()},n.updatePlaybackRate=function(t){m.get(this).animation.updatePlaybackRate(t)},n.persist=function(){m.get(this).animation.persist()},n.cancel=function(){m.get(this).animation.cancel();var t=m.get(this).timeline;t&&"idle"!=m.get(this).playState&&"finished"!=m.get(this).playState&&("running"==m.get(this).playState&&u(t,m.get(this).animation),m.get(this).playState="finished")},e(t,[{key:"effect",get:function(){return m.get(this).animation.effect},set:function(t){return m.get(this).animation.effect=t}},{key:"timeline",get:function(){var t=m.get(this).timeline;return void 0!==t?t:m.get(this).animation.timeline}},{key:"startTime",get:function(){var t=m.get(this).playState;return t?"running"==t?0:null:m.get(this).animation.startTime},set:function(t){m.get(this).animation.startTime=t}},{key:"currentTime",get:function(){return m.get(this).animation.currentTime},set:function(t){m.get(this).animation.currentTime=t}},{key:"playbackRate",get:function(){return m.get(this).animation.playbackRate},set:function(t){m.get(this).animation.playbackRate=t}},{key:"playState",get:function(){return m.get(this).playState||m.get(this).animation.playState}},{key:"replaceState",get:function(){return m.get(this).animation.pending}},{key:"pending",get:function(){return m.get(this).animation.pending}},{key:"id",get:function(){return m.get(this).animation.id}},{key:"onfinish",get:function(){return m.get(this).animation.onfinish},set:function(t){m.get(this).animation.onfinish=t}},{key:"oncancel",get:function(){return m.get(this).animation.oncancel},set:function(t){m.get(this).animation.oncancel=t}},{key:"onremove",get:function(){return m.get(this).animation.onremove},set:function(t){m.get(this).animation.onremove=t}},{key:"finished",get:function(){m.get(this)}},{key:"ready",get:function(){m.get(this)}}]),t}(),d=new WeakMap,S=[[[0,1,2,3]],[[0,2],[1,3]],[[0],[1,3],[2]],[[0],[1],[2],[3]]],y=function(){function t(t){d.set(this,{target:null,edge:"start",threshold:0,rootMargin:[[0,"px"],[0,"px"],[0,"px"],[0,"px"]]}),this.target=t.target,this.edge=t.edge||"start",this.threshold=t.threshold||0,this.rootMargin=t.rootMargin||"0px 0px 0px 0px",this.clamp=t.clamp||!1}return e(t,[{key:"target",set:function(t){if(!(t instanceof Element))throw d.get(this).target=null,Error("Intersection target must be an element.");d.get(this).target=t},get:function(){return d.get(this).target}},{key:"edge",set:function(t){-1!=["start","end"].indexOf(t)&&(d.get(this).edge=t)},get:function(){return d.get(this).edge}},{key:"threshold",set:function(t){var e=parseFloat(t);if(e!=e)throw TypeError("Invalid threshold.");if(e<0||e>1)throw RangeError("threshold must be in the range [0, 1]");d.get(this).threshold=e},get:function(){return d.get(this).threshold}},{key:"rootMargin",set:function(t){var e=t.split(/ +/);if(e.length<1||e.length>4)throw TypeError("rootMargin must contain between 1 and 4 length components");for(var n=[[],[],[],[]],r=0;r<e.length;r++){var o=i(e[r]);if(!o)throw TypeError("Unrecognized rootMargin length");for(var a=S[e.length-1][r],l=0;l<a.length;l++)n[a[l]]=[parseFloat(o.value),o.unit]}d.get(this).rootMargin=n},get:function(){return d.get(this).rootMargin.map(function(t){return t.join("")}).join(" ")}},{key:"clamp",set:function(t){d.get(this).clamp=!!t}}]),t}();if(a.push({parse:function(t){if(t.target)return new y(t)},evaluate:function(t,e,n,i){"block"==e?e="vertical":"inline"==e&&(e="horizontal");for(var r,o=t==document.scrollingElement?{left:0,right:t.clientWidth,top:0,bottom:t.clientHeight,width:t.clientWidth,height:t.clientHeight}:t.getBoundingClientRect(),a=d.get(n).rootMargin,l=[],s=0;s<4;s++)l.push("percent"==(r=a[s])[1]?r[0]*(s%2==0?o.height:o.width)/100:r[0]);var c=o.left-l[3],u=o.right-o.left+l[3]+l[1],f=o.top-l[0],h=o.bottom-o.top+l[0]+l[2],g=d.get(n).clamp,m=n.target.getBoundingClientRect(),p=n.threshold;if("start"==n.edge&&(p=1-p),"vertical"==e){var S=m.top+m.height*p-f+t.scrollTop;return g?"end"==n.edge?Math.max(0,S-h):Math.min(S,t.scrollHeight-h):"end"==n.edge?S-h:S}var y=m.left+m.width*p-c+t.scrollLeft;return g?"end"==n.edge?Math.max(0,y-u):Math.min(y,t.scrollWidth-u):"end"==n.edge?y-u:y}}),!Reflect.defineProperty(window,"ScrollTimeline",{value:f}))throw Error("Error installing ScrollTimeline polyfill: could not attach ScrollTimeline to window");if(!Reflect.defineProperty(Element.prototype,"animate",{value:function(t,e){var n=e.timeline;if(!(n&&n instanceof f))return h.apply(this,[t,e]);delete e.timeline;var i=h.apply(this,[t,e]);i.pause();var r=new p(i,n);return r.play(),r}}))throw Error("Error installing ScrollTimeline polyfill: could not attach WAAPI's animate to DOM Element");if(!Reflect.defineProperty(window,"Animation",{value:p}))throw Error("Error installing Animation constructor.")}();
//# sourceMappingURL=scroll-timeline.js.map
