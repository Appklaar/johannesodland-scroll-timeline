!function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function e(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}function n(t){var e=t.trim().match(/^(-?[0-9]*\.?[0-9]*)(px|%)$/);return e?{value:e[1],unit:e[2]}:null}var r=new WeakMap;function i(t){return t===document.scrollingElement?document:t}function o(t){return Infinity===t.iterationCount?Infinity:Math.max((t.startDelay||0)+(t.duration||0)*(t.iterationCount||1)+(t.endDelay||0),0)}var l=[];function a(t,e,r,i,o){if(o)return o(e,r,i,"0%"===t?"start":"end");"block"===r?r="vertical":"inline"===r&&(r="horizontal");var l="vertical"===r?e.scrollHeight-e.clientHeight:e.scrollWidth-e.clientWidth,a=n("auto"===i?t:i);return"%"===a.unit?parseFloat(a.value)*l/100:parseFloat(a.value)}function s(t){var e=r.get(t).animations;if(0!==e.length)for(var n=t.currentTime,i=0;i<e.length;i++)null==n?"paused"===e[i].playState&&e[i].cancel():e[i].currentTime=n}var c=function(){function t(t){r.set(this,{scrollSource:null,orientation:"block",startScrollOffset:"auto",endScrollOffset:"auto",timeRange:"auto",fill:"none",animations:[],animationOptions:[]}),this.scrollSource=t&&t.scrollSource||document.scrollingElement,this.orientation=t&&t.orientation||"block",this.startScrollOffset=t&&t.startScrollOffset||"auto",this.endScrollOffset=t&&t.endScrollOffset||"auto",this.timeRange=t&&t.timeRange||"auto",this.fill=t&&t.fill||"none"}return e(t,[{key:"scrollSource",set:function(t){var e=this;this.scrollSource&&i(this.scrollSource).removeEventListener("scroll",function(){return s(e)}),t instanceof Element||(t=document.scrollingElement),r.get(this).scrollSource=t,i(t).addEventListener("scroll",function(){return s(e)}),s(this)},get:function(){return r.get(this).scrollSource}},{key:"orientation",set:function(t){-1===["block","inline","horizontal","vertical"].indexOf(t)&&(t="block"),r.get(this).orientation=t,s(this)},get:function(){return r.get(this).orientation}},{key:"startScrollOffset",set:function(t){var e=r.get(this);e.startScrollOffsetFunction=null;for(var n=0;n<l.length;n++){var i=l[n].parse(t);if(void 0!==i){t=i,e.startScrollOffsetFunction=l[n].evaluate;break}}e.startScrollOffset=t,s(this)},get:function(){return r.get(this).startScrollOffset}},{key:"endScrollOffset",set:function(t){r.get(this).endScrollOffsetFunction=null;for(var e=0;e<l.length;e++){var n=l[e].parse(t);if(void 0!==n){t=n,r.get(this).endScrollOffsetFunction=l[e].evaluate;break}}r.get(this).endScrollOffset=t,s(this)},get:function(){return r.get(this).endScrollOffset}},{key:"timeRange",set:function(t){r.get(this).timeRange=t,s(this)},get:function(){return r.get(this).timeRange}},{key:"currentTime",get:function(){if(!this.scrollSource)return null;var t,e,n=a("0%",this.scrollSource,this.orientation,this.startScrollOffset,r.get(this).startScrollOffsetFunction),i=a("100%",this.scrollSource,this.orientation,this.endScrollOffset,r.get(this).endScrollOffsetFunction),l=function(t){var e=t.timeRange;if("auto"===e){e=0;for(var n=r.get(t).animationOptions,i=0;i<n.length;i++)e=Math.max(e,o(n[i]));Infinity===e&&(e=0)}return e}(this),s=this.scrollSource.scrollTop;return s<n?"none"===this.fill||"forwards"===this.fill?null:0:s>=i?i<(t=this.scrollSource,"block"===(e=this.orientation)?e="vertical":"inline"===e&&(e="horizontal"),"vertical"===e?t.scrollHeight-t.clientHeight:"horizontal"===e?t.scrollWidth-t.clientWidth:void 0)&&("none"===this.fill||"backwards"===this.fill)?null:l:(s-n)/(i-n)*l}},{key:"__polyfill",get:function(){return!0}}]),t}(),u=new WeakMap,h=[[[0,1,2,3]],[[0,2],[1,3]],[[0],[1,3],[2]],[[0],[1],[2],[3]]],f=function(){function t(t){u.set(this,{target:null,edge:"start",threshold:0,rootMargin:[[0,"px"],[0,"px"],[0,"px"],[0,"px"]]}),this.target=t.target,this.edge=t.edge||"start",this.threshold=t.threshold||0,this.rootMargin=t.rootMargin||"0px 0px 0px 0px",this.clamp=t.clamp||!1}return e(t,[{key:"target",set:function(t){if(!(t instanceof Element))throw u.get(this).target=null,Error("Intersection target must be an element.");u.get(this).target=t},get:function(){return u.get(this).target}},{key:"edge",set:function(t){-1!=["start","end"].indexOf(t)&&(u.get(this).edge=t)},get:function(){return u.get(this).edge}},{key:"threshold",set:function(t){var e=parseFloat(t);if(e<0||e>1)throw RangeError("threshold must be in the range [0, 1]");u.get(this).threshold=e},get:function(){return u.get(this).threshold}},{key:"rootMargin",set:function(t){var e=t.split(/ +/);if(e.length<1||e.length>4)throw TypeError("rootMargin must contain between 1 and 4 length components");for(var r=[[],[],[],[]],i=0;i<e.length;i++){var o=n(e[i]);if(!o)throw TypeError("Unrecognized rootMargin length");for(var l=h[e.length-1][i],a=0;a<l.length;a++)r[l[a]]=[parseFloat(o.value),o.unit]}u.get(this).rootMargin=r},get:function(){return u.get(this).rootMargin.map(function(t){return t.join("")}).join(" ")}},{key:"clamp",set:function(t){u.get(this).clamp=!!t}}]),t}(),g=window.Element.prototype.animate;if(l.push({parse:function(t){if(t.target)return new f(t)},evaluate:function(t,e,n,r){"block"==e?e="vertical":"inline"==e&&(e="horizontal");for(var i,o=t==document.scrollingElement?{left:0,right:t.clientWidth,top:0,bottom:t.clientHeight,width:t.clientWidth,height:t.clientHeight}:t.getBoundingClientRect(),l=u.get(n).rootMargin,a=[],s=0;s<4;s++)a.push("%"==(i=l[s])[1]?i[0]*(s%2==0?o.height:o.width)/100:i[0]);var c=o.left-a[3],h=o.right-o.left+a[3]+a[1],f=o.top-a[0],g=o.bottom-o.top+a[0]+a[2],d=u.get(n).clamp,m=n.target.getBoundingClientRect(),p=n.threshold;if("start"==n.edge&&(p=1-p),"vertical"==e){var v=m.top+m.height*p-f+t.scrollTop;return d?"end"==n.edge?Math.max(0,v-g):Math.min(v,t.scrollHeight-g):"end"==n.edge?v-g:v}var S=m.left+m.width*p-c+t.scrollLeft;return d?"end"==n.edge?Math.max(0,S-h):Math.min(S,t.scrollWidth-h):"end"==n.edge?S-h:S}}),!Reflect.defineProperty(window,"ScrollTimeline",{value:c}))throw Error("Error installing ScrollTimeline polyfill: could not attach ScrollTimeline to window");if(!Reflect.defineProperty(Element.prototype,"animate",{value:function(t,e){var n=e.timeline;if(!(n&&n instanceof c))return g.apply(this,[t,e]);delete e.timeline;var i=g.apply(this,[t,e]);return i.pause(),function(t,e,n){var i=r.get(t).animations,o=r.get(t).animationOptions;i.push(e),o.push(n),s(t)}(n,i,e),i}}))throw Error("Error installing ScrollTimeline polyfill: could not attach WAAPI's animate to DOM Element")}();
//# sourceMappingURL=scroll-timeline.js.map
